
<div class="wrapper dashboard-wrapper">
		<div class="d-flex flex-wrap flex-xl-nowrap">
			<app-sidebar></app-sidebar>
			<div class="page-content">
				<app-headeradmin></app-headeradmin>
				<main id="content" class="bg-body-tertiary-01 d-flex flex-column main-content">
					<div class="dashboard-page-content">

						<!-- Thông báo thành công -->
						<div *ngIf="showSuccessMessage" class="alert alert-success alert-dismissible fade show" role="alert">
							<strong>Thành công!</strong> Sản phẩm đã được xóa thành công.
							<button type="button" class="btn-close" (click)="showSuccessMessage = false"></button>
						</div>

						<div class="row mb-9 align-items-center justify-content-between">

							<div class="col-md-6 mb-8 mb-md-0">
								<h2 class="fs-4 mb-0">Product List</h2>
								
							</div>
							<div class="col-md-6 d-flex flex-wrap justify-content-md-end">
								<a href="/add_product" class="btn btn-primary">
									Create new
								</a>

							</div>
						</div>


						<div class="card mb-4 rounded-4 p-7">
							<div class="card-header bg-transparent px-0 pt-0 pb-7">
								<div class="row align-items-center justify-content-between">
									<div class="col-md-4 col-12 mr-auto mb-md-0 mb-6">
										
											<h2 class="fs-4 mb-0">All Products</h2>
										
									</div>
									
								</div>
							</div>
							<div class="card-body px-0 pt-7 pb-0">
								<div class="table-responsive table-scroll">
									<table class="table table-hover align-middle table-nowrap mb-0">
										<tbody>
											<tr *ngFor="let product of products">

												<td class="text-center">
													
												</td>
												<td>
													<div class="d-flex align-items-center flex-nowrap">
														<a href="#"
															title="Flowers cotton dress">
															<img [src]="product.image"
																[alt]="product.name" class="lazy-image" width="60"
																height="80">
														</a>
														<a href="#"
															title="Flowers cotton dress" class="ms-6">
															<p class="fw-semibold text-body-emphasis mb-0">{{product.name}}</p>
														</a>
													</div>
												</td>
												<td>{{ product.price | currency:'USD':'symbol':'1.2-2' }}</td>
												<td>{{product.quantity}}</td>
												<td class="text-center">
													<div class="d-flex flex-nowrap justify-content-center">
														<a [routerLink]="['/update_product',product.id]"
															class="btn btn-primary py-4 px-5 btn-xs fs-13px me-4"><i
																class="far fa-pen me-2"></i> Edit</a>
														<button type="button"
															(click)="onDeleteProduct(product.id)"
															class="btn btn-outline-primary btn-hover-bg-danger btn-hover-border-danger btn-hover-text-light py-4 px-5 fs-13px btn-xs me-4">
															<i class="far fa-trash me-2"></i> Delete
														</button>
													</div>
												</td>
											</tr>
											
										</tbody>
									</table>
								</div>
							</div>
						</div>

						<nav aria-label="Page navigation example" class="mt-6 mb-4">
							
						</nav>
					</div>
				</main>
			</div>
		</div>
	</div>

	<!-- Modal xác nhận xóa -->
	<div *ngIf="showDeleteModal" class="modal fade show" style="display: block;" tabindex="-1">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Xác nhận xóa sản phẩm</h5>
					<button type="button" class="btn-close" (click)="cancelDelete()"></button>
				</div>
				<div class="modal-body">
					<p>Bạn có chắc chắn muốn xóa sản phẩm <strong>"{{productToDelete?.name}}"</strong> không?</p>
					<p class="text-muted">Hành động này không thể hoàn tác.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" (click)="cancelDelete()">Hủy</button>
					<button type="button" class="btn btn-danger" (click)="confirmDelete()">Xóa sản phẩm</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Backdrop cho modal -->
	<div *ngIf="showDeleteModal" class="modal-backdrop fade show"></div>